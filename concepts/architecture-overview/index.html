
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://cast.ai/concepts/architecture-overview/">
      
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.6">
    
    
      
        <title>Cluster architecture overview - CAST AI Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.cb6bc1d0.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.39b8e14a.min.css">
        
          
          
          <meta name="theme-color" content="#ffffff">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nimbus+Sans:300,400,400i,700%7C&display=fallback">
        <style>body,input{font-family:"Nimbus Sans",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="white" data-md-color-accent="indigo">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cluster-architecture-overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://cast.ai" title="CAST AI Documentation" class="md-header-nav__button md-logo" aria-label="CAST AI Documentation">
      <img src="../../img/cast-logo-dark-blue.svg" alt="Cast logo" style="width: 5em;" />
    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            CAST AI Documentation
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Cluster architecture overview
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://cast.ai" title="CAST AI Documentation" class="md-nav__button md-logo" aria-label="CAST AI Documentation">
      <img src="../../img/cast-logo-dark-blue.svg" alt="Cast logo" style="width: 5em;" />
    </a>
    CAST AI Documentation
  </label>
  
    <div class="md-nav__source">
      
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../getting-help/" class="md-nav__link">
        Getting help
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" >
      
      <label class="md-nav__link" for="nav-3">
        Getting started
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Getting started" data-md-level="1">
        <label class="md-nav__title" for="nav-3">
          <span class="md-nav__icon md-icon"></span>
          Getting started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/setting-up-account/" class="md-nav__link">
        Setting up an account
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2" >
      
      <label class="md-nav__link" for="nav-3-2">
        Setting up credentials
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Setting up credentials" data-md-level="2">
        <label class="md-nav__title" for="nav-3-2">
          <span class="md-nav__icon md-icon"></span>
          Setting up credentials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/configuring-gcp-credentials/" class="md-nav__link">
        Configure Google Cloud credentials
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/configuring-aws-credentials/" class="md-nav__link">
        Configure AWS credentials
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/configuring-do-credentials/" class="md-nav__link">
        Configure Digital Ocean credentials
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/configuring-azure-credentials/" class="md-nav__link">
        Configure Azure credentials
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/creating-your-first-cluster/" class="md-nav__link">
        Creating your first cluster
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/deploying-applications/" class="md-nav__link">
        Deploying Applications
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
      
      <label class="md-nav__link" for="nav-4">
        Concepts
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Concepts" data-md-level="1">
        <label class="md-nav__title" for="nav-4">
          <span class="md-nav__icon md-icon"></span>
          Concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../how-it-works/" class="md-nav__link">
        How it works
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Cluster architecture overview
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Cluster architecture overview
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cluster-lifecycle" class="md-nav__link">
    Cluster lifecycle
  </a>
  
    <nav class="md-nav" aria-label="Cluster lifecycle">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#provisioning" class="md-nav__link">
    Provisioning
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reconciliation-healing" class="md-nav__link">
    Reconciliation &amp; healing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resizing" class="md-nav__link">
    Resizing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleanup" class="md-nav__link">
    Cleanup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cluster-architecture" class="md-nav__link">
    Cluster architecture
  </a>
  
    <nav class="md-nav" aria-label="Cluster architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#context" class="md-nav__link">
    Context
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cluster-infrastructure" class="md-nav__link">
    Cluster infrastructure
  </a>
  
    <nav class="md-nav" aria-label="Cluster infrastructure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nodes" class="md-nav__link">
    Nodes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress" class="md-nav__link">
    Ingress
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-details" class="md-nav__link">
    Network details
  </a>
  
    <nav class="md-nav" aria-label="Network details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#region-zone" class="md-nav__link">
    Region &amp; zone
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#master-nodes-inbound" class="md-nav__link">
    Master nodes inbound
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#worker-nodes-inbound" class="md-nav__link">
    Worker nodes inbound
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subnets" class="md-nav__link">
    Subnets
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" >
      
      <label class="md-nav__link" for="nav-5">
        Developer guides
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Developer guides" data-md-level="1">
        <label class="md-nav__title" for="nav-5">
          <span class="md-nav__icon md-icon"></span>
          Developer guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/pod-pinning/" class="md-nav__link">
        Configure pod placement by topology
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/volumes/" class="md-nav__link">
        Dynamic volume provisioning
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/autoscaling-policies/" class="md-nav__link">
        Autoscaling policies
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/pod-autoscaler/hpa/" class="md-nav__link">
        Horizontal Pod Autoscaler
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/ingress/" class="md-nav__link">
        Exposing your app to the internet
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/node-autoscaler/spot-instances/spot/" class="md-nav__link">
        Spot/Preemptible Instances
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" >
      
      <label class="md-nav__link" for="nav-6">
        API
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="API" data-md-level="1">
        <label class="md-nav__title" for="nav-6">
          <span class="md-nav__icon md-icon"></span>
          API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/overview/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/authentication/" class="md-nav__link">
        Authentication
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/specification/" class="md-nav__link">
        API specification
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/terraform-provider/" class="md-nav__link">
        Terraform provider
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cluster-lifecycle" class="md-nav__link">
    Cluster lifecycle
  </a>
  
    <nav class="md-nav" aria-label="Cluster lifecycle">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#provisioning" class="md-nav__link">
    Provisioning
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reconciliation-healing" class="md-nav__link">
    Reconciliation &amp; healing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resizing" class="md-nav__link">
    Resizing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleanup" class="md-nav__link">
    Cleanup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cluster-architecture" class="md-nav__link">
    Cluster architecture
  </a>
  
    <nav class="md-nav" aria-label="Cluster architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#context" class="md-nav__link">
    Context
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cluster-infrastructure" class="md-nav__link">
    Cluster infrastructure
  </a>
  
    <nav class="md-nav" aria-label="Cluster infrastructure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nodes" class="md-nav__link">
    Nodes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress" class="md-nav__link">
    Ingress
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-details" class="md-nav__link">
    Network details
  </a>
  
    <nav class="md-nav" aria-label="Network details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#region-zone" class="md-nav__link">
    Region &amp; zone
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#master-nodes-inbound" class="md-nav__link">
    Master nodes inbound
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#worker-nodes-inbound" class="md-nav__link">
    Worker nodes inbound
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subnets" class="md-nav__link">
    Subnets
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/castai/docs/edit/main/docs/concepts/architecture-overview.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="cluster-architecture-overview">Cluster architecture overview<a class="headerlink" href="#cluster-architecture-overview" title="Permanent link">&para;</a></h1>
<p>This chapter summarizes the overall design of your Kubernetes cluster and how it's relationships with CAST AI platform.</p>
<h2 id="cluster-lifecycle">Cluster lifecycle<a class="headerlink" href="#cluster-lifecycle" title="Permanent link">&para;</a></h2>
<h3 id="provisioning">Provisioning<a class="headerlink" href="#provisioning" title="Permanent link">&para;</a></h3>
<p>You initiate creation of the cluster by providing CAST AI with:</p>
<ul>
<li>Access to your Cloud accounts - CAST AI uses these to call cloud APIs to build your infrastructure for you;</li>
<li>Initial configuration of your cluster, like region or size of the control plane. We aim to keep these options to a minimum and use our own opinionated setup where appropriate.</li>
</ul>
<h3 id="reconciliation-healing">Reconciliation &amp; healing<a class="headerlink" href="#reconciliation-healing" title="Permanent link">&para;</a></h3>
<p>All clusters created on CAST AI enter a reconciliation loop, where platform periodically re-checks that actual infrastructure on your cloud reflects the specified configuration, and performs upgrades &amp; patching. Reconciliation performs checks such as:</p>
<ul>
<li>Is cluster network configuration up to date;</li>
<li>Are any nodes missing, e.g. accidentally deleted;</li>
<li>Are there any dangling resources on your cloud associated with your cluster to clean up.</li>
</ul>
<h3 id="resizing">Resizing<a class="headerlink" href="#resizing" title="Permanent link">&para;</a></h3>
<p>You'll notice that CAST AI clusters don't have a "node pool" concept you might be familiar with. Instead, you can choose specific node configuration to be added whenever you need to expand the cluster, or select specific nodes to delete when shrinking it.</p>
<p>Same applies to autoscaling engine - it performs decisions per-node level, instead of choosing to grow or shrink a node pool.</p>
<h3 id="cleanup">Cleanup<a class="headerlink" href="#cleanup" title="Permanent link">&para;</a></h3>
<p>When you instruct CAST to delete your cluster, in general case platform will just try to collapse created cloud resources in the fastest way. Keep in mind that nodes will not be drained before deleting them, and any running workloads won't be given a chance to terminate gracefully.</p>
<p>Deletion aims to minimize unintended removals. For example, virtual machines on AWS are deleted by a specific tag containing cluster UUID. If any additional VMs remain present in cluster's security group, that security group won't be deleted and you'll see delete operation fail.</p>
<h2 id="cluster-architecture">Cluster architecture<a class="headerlink" href="#cluster-architecture" title="Permanent link">&para;</a></h2>
<h3 id="context">Context<a class="headerlink" href="#context" title="Permanent link">&para;</a></h3>
<p>Below diagram highlights primary groups of components that define a relationship between CAST AI platform and your cluster.</p>
<p><img alt="" src="component-relationships.png" /></p>
<p>New CAST AI users will start by interacting with the platform via console UI (<a href="https://console.cast.ai">https://console.cast.ai</a>). Once the created cluster is ready, by downloading cluster's kubeconfig you are able to access your cluster directly. Some of the middleware that is running on the cluster (Grafana, Kubernetes dashboard) is directly reachable from UI through the single-signon gateway.</p>
<p>You can notice that there's a bi-direction link between your cluster and CAST AI platform. Not only the platform connects to your cloud infrastructure or the cluster itself; CAST AI also relies on the cluster to "call back" and inform about certain events:</p>
<ul>
<li>Cluster control plane nodes actions with provisioning engine, e.g. when to join the cluster;</li>
<li>Nodes inform about operations being completed, like finishing joining the cluster;</li>
<li>Relevant cloud events get propagated to provisioning engine &amp; autoscaler, for example, "spot instance is being terminated by cloud provider";</li>
</ul>
<p>Your app users don't interact with CAST AI in any way. You own your kubernetes cluster infrastructure 100%, including any ingress infrastructure to reach your cluster workloads.</p>
<h2 id="cluster-infrastructure">Cluster infrastructure<a class="headerlink" href="#cluster-infrastructure" title="Permanent link">&para;</a></h2>
<h3 id="nodes">Nodes<a class="headerlink" href="#nodes" title="Permanent link">&para;</a></h3>
<p>Here's the overview on where cluster virtual machines will be provisioned on your cloud.</p>
<p><img alt="" src="nodes-infrastructure.png" /></p>
<h3 id="ingress">Ingress<a class="headerlink" href="#ingress" title="Permanent link">&para;</a></h3>
<p>CAST AI provisioned clusters contain all the infrastructure needed to equip your app with an external TLS endpoint:</p>
<ul>
<li>DNS entry to round-robin;</li>
<li>Load-balancing infrastructure: cloud-native load balancers that route traffic to sub-section of your cluster (e.g. traffic that hits AWS load balancer will route to AWS nodes);</li>
<li>Nginx ingress controller, paired with TLS certificate manager, that listen to your deployed resources and maintain routing&amp;TLS configuration;</li>
<li>Metric collection for your ingress traffic;</li>
</ul>
<p>All that is left for you as an application developer is to deploy your app, ingress resource, and configure a domain alias of your choice. See the <a href="../../guides/ingress/">guide</a> for more details.</p>
<p><img alt="" src="ingress.png" /></p>
<h3 id="network-details">Network details<a class="headerlink" href="#network-details" title="Permanent link">&para;</a></h3>
<h4 id="region-zone">Region &amp; zone<a class="headerlink" href="#region-zone" title="Permanent link">&para;</a></h4>
<p>As you select a Cast region, for each cloud it maps to a specific region on that cloud.</p>
<p>For example, <strong>US East (Ashburn)</strong> region maps to:</p>
<ul>
<li>AWS: us-east-1</li>
<li>GCP: us-east4</li>
<li>Azure: eastus</li>
<li>Digital Ocean: nyc1</li>
</ul>
<p>Currently, on each cloud CAST AI builds a single-zone setup of your cluster. Zone selection is cloud-specific.</p>
<h4 id="master-nodes-inbound">Master nodes inbound<a class="headerlink" href="#master-nodes-inbound" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Protocol</th>
<th>Port</th>
<th>Source</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>tcp</td>
<td>6443</td>
<td>0.0.0.0/0</td>
<td>k8s API server</td>
</tr>
<tr>
<td>udp</td>
<td>51820</td>
<td>0.0.0.0/0</td>
<td>WireGuard (if used)</td>
</tr>
</tbody>
</table>
<h4 id="worker-nodes-inbound">Worker nodes inbound<a class="headerlink" href="#worker-nodes-inbound" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Protocol</th>
<th>Port</th>
<th>Source</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>udp</td>
<td>51820</td>
<td>0.0.0.0/0</td>
<td>WireGuard (if used)</td>
</tr>
<tr>
<td>tcp/udp</td>
<td>NodePort</td>
<td>0.0.0.0/0</td>
<td>k8s Service with type=LoadBalancer</td>
</tr>
</tbody>
</table>
<h4 id="subnets">Subnets<a class="headerlink" href="#subnets" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Range</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>10.96.0.0/12</td>
<td>k8s services</td>
</tr>
<tr>
<td>10.217.0.0/16</td>
<td>k8s pods</td>
</tr>
<tr>
<td>10.4.0.0/16</td>
<td>WireGuard</td>
</tr>
<tr>
<td>10.0.0.0/16</td>
<td>GCP VPC. Smaller /24 blocks are allocated for subnets.</td>
</tr>
<tr>
<td>10.10.0.0/16</td>
<td>AWS VPC. Smaller /24 blocks are allocated for subnets.</td>
</tr>
<tr>
<td>10.20.0.0/16</td>
<td>AZURE VPC. Smaller /24 blocks are allocated for subnets.</td>
</tr>
<tr>
<td>10.100-255.0.0/20</td>
<td>DigitalOcean VPC. There is only one subnet which is allocated dynamically.</td>
</tr>
</tbody>
</table>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../how-it-works/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                How it works
              </div>
            </div>
          </a>
        
        
          <a href="../../guides/pod-pinning/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Configure pod placement by topology
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.53cc9318.min.js"></script>
      <script src="../../assets/javascripts/bundle.e9c9f54f.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>