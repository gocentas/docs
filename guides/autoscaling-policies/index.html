
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://cast.ai/guides/autoscaling-policies/">
      
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.6">
    
    
      
        <title>Autoscaling policies - CAST AI Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.cb6bc1d0.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.39b8e14a.min.css">
        
          
          
          <meta name="theme-color" content="#ffffff">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nimbus+Sans:300,400,400i,700%7C&display=fallback">
        <style>body,input{font-family:"Nimbus Sans",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="white" data-md-color-accent="indigo">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#autoscaling-policies" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://cast.ai" title="CAST AI Documentation" class="md-header-nav__button md-logo" aria-label="CAST AI Documentation">
      <img src="../../img/cast-logo-dark-blue.svg" alt="Cast logo" style="width: 5em;" />
    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            CAST AI Documentation
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Autoscaling policies
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://cast.ai" title="CAST AI Documentation" class="md-nav__button md-logo" aria-label="CAST AI Documentation">
      <img src="../../img/cast-logo-dark-blue.svg" alt="Cast logo" style="width: 5em;" />
    </a>
    CAST AI Documentation
  </label>
  
    <div class="md-nav__source">
      
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../getting-help/" class="md-nav__link">
        Getting help
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" >
      
      <label class="md-nav__link" for="nav-3">
        Getting started
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Getting started" data-md-level="1">
        <label class="md-nav__title" for="nav-3">
          <span class="md-nav__icon md-icon"></span>
          Getting started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/setting-up-account/" class="md-nav__link">
        Setting up an account
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2" >
      
      <label class="md-nav__link" for="nav-3-2">
        Setting up credentials
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Setting up credentials" data-md-level="2">
        <label class="md-nav__title" for="nav-3-2">
          <span class="md-nav__icon md-icon"></span>
          Setting up credentials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/configuring-gcp-credentials/" class="md-nav__link">
        Configure Google Cloud credentials
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/configuring-aws-credentials/" class="md-nav__link">
        Configure AWS credentials
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/configuring-do-credentials/" class="md-nav__link">
        Configure Digital Ocean credentials
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/configuring-azure-credentials/" class="md-nav__link">
        Configure Azure credentials
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/creating-your-first-cluster/" class="md-nav__link">
        Creating your first cluster
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/deploying-applications/" class="md-nav__link">
        Deploying Applications
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
      
      <label class="md-nav__link" for="nav-4">
        Concepts
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Concepts" data-md-level="1">
        <label class="md-nav__title" for="nav-4">
          <span class="md-nav__icon md-icon"></span>
          Concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/how-it-works/" class="md-nav__link">
        How it works
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/architecture-overview/" class="md-nav__link">
        Cluster architecture overview
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
      
      <label class="md-nav__link" for="nav-5">
        Developer guides
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Developer guides" data-md-level="1">
        <label class="md-nav__title" for="nav-5">
          <span class="md-nav__icon md-icon"></span>
          Developer guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../pod-pinning/" class="md-nav__link">
        Configure pod placement by topology
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../volumes/" class="md-nav__link">
        Dynamic volume provisioning
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Autoscaling policies
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Autoscaling policies
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cluster-cpu-limits-policy" class="md-nav__link">
    Cluster CPU limits policy
  </a>
  
    <nav class="md-nav" aria-label="Cluster CPU limits policy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-cpu-limits-policy" class="md-nav__link">
    Configuring CPU limits policy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#horizontal-pod-autoscaler-hpa-policy" class="md-nav__link">
    Horizontal Pod Autoscaler (HPA) policy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unscheduled-pods-policy" class="md-nav__link">
    Unscheduled pods policy
  </a>
  
    <nav class="md-nav" aria-label="Unscheduled pods policy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-the-unscheduled-pods-policy" class="md-nav__link">
    Configuring the unscheduled pods policy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cluster-cpu-utilization-scale-up-policy" class="md-nav__link">
    Cluster CPU utilization scale up policy
  </a>
  
    <nav class="md-nav" aria-label="Cluster CPU utilization scale up policy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-the-cpu-utilization-scale-up-policy" class="md-nav__link">
    Configuring the CPU utilization scale up policy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#policies-precedence-rules" class="md-nav__link">
    Policies precedence rules
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../pod-autoscaler/hpa/" class="md-nav__link">
        Horizontal Pod Autoscaler
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ingress/" class="md-nav__link">
        Exposing your app to the internet
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../node-autoscaler/spot-instances/spot/" class="md-nav__link">
        Spot/Preemptible Instances
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" >
      
      <label class="md-nav__link" for="nav-6">
        API
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="API" data-md-level="1">
        <label class="md-nav__title" for="nav-6">
          <span class="md-nav__icon md-icon"></span>
          API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/overview/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/authentication/" class="md-nav__link">
        Authentication
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/specification/" class="md-nav__link">
        API specification
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/terraform-provider/" class="md-nav__link">
        Terraform provider
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cluster-cpu-limits-policy" class="md-nav__link">
    Cluster CPU limits policy
  </a>
  
    <nav class="md-nav" aria-label="Cluster CPU limits policy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-cpu-limits-policy" class="md-nav__link">
    Configuring CPU limits policy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#horizontal-pod-autoscaler-hpa-policy" class="md-nav__link">
    Horizontal Pod Autoscaler (HPA) policy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unscheduled-pods-policy" class="md-nav__link">
    Unscheduled pods policy
  </a>
  
    <nav class="md-nav" aria-label="Unscheduled pods policy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-the-unscheduled-pods-policy" class="md-nav__link">
    Configuring the unscheduled pods policy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cluster-cpu-utilization-scale-up-policy" class="md-nav__link">
    Cluster CPU utilization scale up policy
  </a>
  
    <nav class="md-nav" aria-label="Cluster CPU utilization scale up policy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-the-cpu-utilization-scale-up-policy" class="md-nav__link">
    Configuring the CPU utilization scale up policy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#policies-precedence-rules" class="md-nav__link">
    Policies precedence rules
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/castai/docs/edit/main/docs/guides/autoscaling-policies.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="autoscaling-policies">Autoscaling policies<a class="headerlink" href="#autoscaling-policies" title="Permanent link">&para;</a></h1>
<p>Autoscaling policies define a set of rules based on which your cluster is monitored and scaled to maintain steady
performance at the lowest possible cost.</p>
<p>This topic describes the available policy configuration options and provides guidance on how to configure them.</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<p>To enable the autoscaling policies, you need to create a cluster first. Here's a guide that shows you how to create a cluster: <a href="../../getting-started/creating-your-first-cluster/">Creating your first
cluster</a>.</p>
<p>To see the available policy settings, select your cluster and navigate to <em>Policies</em> on
<a href="https://console.cast.ai/">CAST AI's console</a>:</p>
<p><img alt="" src="policies.png" /></p>
<h2 id="cluster-cpu-limits-policy">Cluster CPU limits policy<a class="headerlink" href="#cluster-cpu-limits-policy" title="Permanent link">&para;</a></h2>
<p>Each CAST AI cluster size can be limited by <strong>the total amount</strong> of vCPUs available on all the worker nodes
used to run workloads.
If disabled, the cluster can upscale indefinitely and downscale to 0 worker nodes, depending on the actual
resource consumption.</p>
<h3 id="configuring-cpu-limits-policy">Configuring CPU limits policy<a class="headerlink" href="#configuring-cpu-limits-policy" title="Permanent link">&para;</a></h3>
<p>You can adjust a cluster's CPU limits settings either via the <a href="https://console.cast.ai/">CAST AI console:</a></p>
<p><img alt="" src="cluster_size.png" /></p>
<p>or via the <a href="https://api.cast.ai/v1/spec/#/cluster-policies/UpsertPolicies">CAST AI policies API endpoint</a> by setting
values for</p>
<div class="highlight"><pre><span></span><code><span class="nt">&quot;clusterLimits&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;cpu&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;maxCores&quot;</span><span class="p">:</span> <span class="err">&lt;value&gt;</span><span class="p">,</span>
      <span class="nt">&quot;minCores&quot;</span><span class="p">:</span> <span class="err">&lt;value&gt;</span>
    <span class="p">},</span>
    <span class="nt">&quot;enabled&quot;</span><span class="p">:</span> <span class="err">&lt;value&gt;</span>
<span class="p">}</span>
</code></pre></div>
<p>The new settings will propagate immediately.</p>
<h2 id="horizontal-pod-autoscaler-hpa-policy">Horizontal Pod Autoscaler (HPA) policy<a class="headerlink" href="#horizontal-pod-autoscaler-hpa-policy" title="Permanent link">&para;</a></h2>
<p>See <a href="../pod-autoscaler/hpa/">HPA documentation</a> for a detailed overview.</p>
<h2 id="unscheduled-pods-policy">Unscheduled pods policy<a class="headerlink" href="#unscheduled-pods-policy" title="Permanent link">&para;</a></h2>
<p>A pod becomes unschedulable when the Kubernetes scheduler can't find a node that can accommodate the pod.
For instance, a pod can request more CPU or memory than the resources available on any of the worker nodes.
In many such cases, this indicates the need to scale up by adding additional nodes to the cluster.
The CAST AI autoscaler is equipped with a mechanism to handle this.</p>
<p>After receiving the unschedulable pods event, the CAST AI recommendation engine will select the best price/performance ratio node able to accommodate all of the currently unschedulable pods.
CAST AI will then provision it and join with the cluster. This process usually takes a few minutes, depending on the cloud service provider of your choice.
Currently, only a single node will be added at a time. If any unschedulable pods still remain, the cycle is
repeated until all the pods are scheduled (provided that the reason was insufficient resources).</p>
<h3 id="configuring-the-unscheduled-pods-policy">Configuring the unscheduled pods policy<a class="headerlink" href="#configuring-the-unscheduled-pods-policy" title="Permanent link">&para;</a></h3>
<p>You can enable/disable the unschedulable pods policy either on the <a href="https://console.cast.ai/">CAST AI console:</a>:</p>
<p><img alt="" src="unschedulable_pods.png" /></p>
<p>or via the <a href="https://api.cast.ai/v1/spec/#/cluster-policies/UpsertPolicies">CAST AI policies API endpoint</a> by setting
values for</p>
<div class="highlight"><pre><span></span><code><span class="nt">&quot;unschedulablePods&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;enabled&quot;</span><span class="p">:</span> <span class="err">&lt;value&gt;</span><span class="p">,</span>
    <span class="nt">&quot;evaluationPeriodSeconds&quot;</span><span class="p">:</span> <span class="err">&lt;value&gt;</span>
<span class="p">}</span>
</code></pre></div>
<p>It may take a few minutes for the new settings to propagate.</p>
<h2 id="cluster-cpu-utilization-scale-up-policy">Cluster CPU utilization scale up policy<a class="headerlink" href="#cluster-cpu-utilization-scale-up-policy" title="Permanent link">&para;</a></h2>
<p>An increased CPU load on worker nodes indicates that the cluster is getting 'hot' - the fleet of nodes might not
be sufficient to fulfill the current computing resources needs.
In that case, you can increase the computing capacity by adding in additional worker nodes.
CAST AI's cluster autoscaler provides a mechanism to handle this with <em>CPU utilization scale up policy</em>.
By applying this policy, your cluster is periodically checked for the actual CPU consumption over the worker nodes.
When a sustained increased CPU load is detected, the autoscaler automatically adds a new node to redistribute the load
more evenly.
This process can take a few minutes, depending on the underlying cloud service provider. If an addition is already in progress, the autoscaler will
not attempt to add a new node.</p>
<h3 id="configuring-the-cpu-utilization-scale-up-policy">Configuring the CPU utilization scale up policy<a class="headerlink" href="#configuring-the-cpu-utilization-scale-up-policy" title="Permanent link">&para;</a></h3>
<p>The autoscaler's scale up policy is set by adjusting thresholds for the average cluster CPU load in percentages and evaluation
period in seconds.
The evaluation window describes for how long the average cluster CPU utilization should stay above the threshold for it to
be considered as eligible for scale up.</p>
<p>You can edit settings for this policy via the <a href="https://console.cast.ai/">CAST AI console</a>:</p>
<p><img alt="" src="cpu_scale_up.png" /></p>
<p>or the <a href="https://api.cast.ai/v1/spec/#/cluster-policies/UpsertPolicies">CAST AI policies API endpoint</a> by setting values
for</p>
<div class="highlight"><pre><span></span><code><span class="nt">&quot;cpuUtilization&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;scaleUpThreshold&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;avgCpuLoadPercentageMoreThan&quot;</span><span class="p">:</span> <span class="err">&lt;value&gt;</span><span class="p">,</span>
      <span class="nt">&quot;enabled&quot;</span><span class="p">:</span> <span class="err">&lt;value&gt;</span><span class="p">,</span>
      <span class="nt">&quot;evaluationPeriodSeconds&quot;</span><span class="p">:</span> <span class="err">&lt;value&gt;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>It may take a few minutes for the new settings to propagate.</p>
<h2 id="policies-precedence-rules">Policies precedence rules<a class="headerlink" href="#policies-precedence-rules" title="Permanent link">&para;</a></h2>
<p>If multiple policies are enabled and multiple rules are triggered during the same evaluation period, they will be
handled in the following order:</p>
<ul>
<li><a href="#cluster-cpu-limits-policy">Cluster CPU limits policy</a></li>
<li><a href="#horizontal-pod-autoscaler-hpa-policy">Horizontal Pod Autoscaler (HPA) policy</a></li>
<li><a href="#unscheduled-pods-policy">Unscheduled pods policy</a></li>
<li><a href="#cluster-cpu-utilization-scale-up-policy">Cluster CPU utilization scale up policy</a></li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../volumes/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Dynamic volume provisioning
              </div>
            </div>
          </a>
        
        
          <a href="../pod-autoscaler/hpa/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Horizontal Pod Autoscaler
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.53cc9318.min.js"></script>
      <script src="../../assets/javascripts/bundle.e9c9f54f.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>